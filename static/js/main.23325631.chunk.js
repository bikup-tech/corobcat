(this.webpackJsonpcorobcat=this.webpackJsonpcorobcat||[]).push([[0],{395:function(e,n,t){},521:function(e,n,t){},522:function(e,n,t){},523:function(e,n,t){},539:function(e,n){},645:function(e,n,t){},646:function(e,n,t){},647:function(e,n,t){},648:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),c=t(41),i=t.n(c),s=(t(395),t(40)),o=t(36),l=t(54),d="/machines",j=function(e){return"/machines/".concat(e)},u="/employees",b="/finishedTasks",m="/admin",h=t(18),O=t(16),x=t(10),p=t(723),f=t(724),g=t(702),v=t(725),y=t(46),k=t(43),w=t(20),C=t.n(w),T=t(5),N=t(34),_="http://localhost:8000/api",E="/settings",M=function(e){return"/users/".concat(e)},F=function(e){return"/users/role/".concat(e)},D=function(e){return"/users/code/".concat(e)},S=function(e){return"/tasks/active?status=".concat(e)},I=function(e){return"/tasks/".concat(e)},P=function(e){return"/machines/name/".concat(e)},L="FORCE_RENDER",z="LOGIN_LOADING",q="LOGIN_SUCCESS",R="LOGIN_ERROR",A="LOGOUT",W="SET_CREATE_TASK_MODAL_ISOPEN",B="SET_CREATE_TASK_MODAL_SELECTED_MACHINE",G="LOAD_SETTINGS",H="maquina1",V="maquina2",Q=t(24),U=t.n(Q);function Y(e,n,t){return{selectedMachine:t.selectedMachine.toLowerCase(),duration:Number(t.duration),user:e,machine:n,material:t.material,thickness:Number(t.thickness),programNumber:t.programNumber,priority:Number(t.priority)}}var $=t(23);function J(){return{type:L}}function K(e){return{type:W,payload:e}}function X(e){return{type:B,payload:e}}function Z(){return function(){var e=Object(N.a)(C.a.mark((function e(n){var t,a,r,c,i,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(_).concat(E),e.next=4,U.a.get(t);case 4:a=e.sent,r=a.data,n({type:G,payload:r}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),s=(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.message)||e.t0.message,$.b.error(s);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}()}var ee,ne=t(151),te=t(721),ae=t(145),re=t.n(ae),ce=t(713),ie=t(720),se=t(11),oe=t(0),le=se.a.div(ee||(ee=Object(x.a)(["\n  input {\n    padding: 0.75rem 0.5rem;\n  }\n"])));var de,je,ue,be,me,he,Oe,xe,pe,fe,ge,ve,ye,ke,we,Ce,Te,Ne,_e,Ee,Me,Fe,De,Se,Ie,Pe,Le=function(e){var n=Object(k.c)(),t=e.name,a=e.label,r=e.placeholder,c=e.variant,i=void 0===c?"outlined":c,s=e.size,o=void 0===s?"medium":s,l=e.type,d=void 0===l?"text":l,j=e.margin,u=void 0===j?"dense":j,b=e.autofocus,m=void 0!==b&&b,h=e.fullWidth,O=void 0!==h&&h,x=e.adornment,p=void 0===x?null:x,f=e.disabled,g=void 0!==f&&f,v=e.min,y=e.max;return Object(oe.jsx)(le,{className:"formikTextField",children:Object(oe.jsx)(ce.a,{variant:i,name:t,label:a,type:d,placeholder:r,size:o,onChange:function(e){var a=e.target;n.setFieldValue(t,a.value)},value:n.values[t],autoFocus:m,fullWidth:O,margin:u,helperText:n.touched[t]&&n.errors[t]&&n.errors[t],error:!(!n.touched[t]||!n.errors[t]),disabled:g,InputProps:{inputProps:{min:v,max:y},endAdornment:p&&Object(oe.jsx)(ie.a,{position:"end",children:p})}})})},ze=se.a.div(de||(de=Object(x.a)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  height: 60px;\n  margin-bottom: 1rem;\n"]))),qe=se.a.div(je||(je=Object(x.a)(["\n  display: flex;\n  height: 100%;\n  align-items: center;\n"]))),Re=Object(se.a)(ne.a)(ue||(ue=Object(x.a)(["\n  font-weight: 600;\n  margin-right: 1rem;\n"]))),Ae=se.a.div(be||(be=Object(x.a)(["\n  .MuiButton-root {\n    min-width: unset;\n    border-radius: 50%;\n    width: 2.5rem;\n    height: 2.5rem;\n  }\n"]))),We=se.a.div(me||(me=Object(x.a)(["\n  margin-right: 1rem;\n"]))),Be=function(){return Object(oe.jsxs)(ze,{children:[Object(oe.jsx)(qe,{children:Object(oe.jsx)(Re,{children:"Crear Empleado: "})}),Object(oe.jsx)(Le,{name:"name",size:"small",label:"Nombre",placeholder:"Nombre"}),Object(oe.jsx)(We,{}),Object(oe.jsx)(Le,{name:"surname",size:"small",label:"Apellidos",placeholder:"Apellidos"}),Object(oe.jsx)(We,{}),Object(oe.jsx)(Le,{name:"employerCode",size:"small",label:"C\xf3d. Emp.",placeholder:"C\xf3digo empleado"}),Object(oe.jsx)(We,{}),Object(oe.jsx)(qe,{children:Object(oe.jsx)(Ae,{children:Object(oe.jsx)(te.a,{variant:"contained",size:"small",sx:{width:"2rem",height:"2rem"},type:"submit",children:Object(oe.jsx)(re.a,{fontSize:"small"})})})})]})},Ge=t(722),He=t(181),Ve=t.n(He),Qe=se.a.li(he||(he=Object(x.a)(["\n  width: 100%;\n  padding: 0.25rem 1rem;\n  display: flex;\n  justify-content: space-between;\n  background: #f5f5f5;\n  border-radius: 0.5rem;\n  margin-bottom: 0.5rem;\n  align-items: center;\n"]))),Ue=Object(se.a)(ne.a)(Oe||(Oe=Object(x.a)(["\n  flex: 1;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n"]))),Ye=function(e){var n=e.handleDelete,t=e.itemName;return Object(oe.jsxs)(Qe,{children:[Object(oe.jsx)(Ue,{children:t}),Object(oe.jsx)(Ge.a,{onClick:n,children:Object(oe.jsx)(Ve.a,{sx:{cursor:"pointer",":hover":{color:"#1876D1"}}})})]})},$e=t(700),Je=t(19),Ke=Object(se.a)($e.a.div).attrs((function(){return{initial:{opacity:0},animate:{opacity:1}}}))(xe||(xe=Object(x.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),Xe=Object(se.a)(ne.a)(pe||(pe=Object(x.a)(["\n  font-size: 1.15rem;\n  font-weight: 600;\n  margin-bottom: 0.75rem;\n  text-decoration: underline;\n"]))),Ze=se.a.div(fe||(fe=Object(x.a)(["\n  display: flex;\n  width: 100%;\n  flex-wrap: wrap;\n  height: 100%;\n  overflow-y: auto;\n  align-content: flex-start;\n"]))),en=se.a.div(ge||(ge=Object(x.a)(["\n  margin-right: 1rem;\n  width: 20rem;\n"]))),nn={name:"",surname:"",employerCode:""},tn=y.b({name:y.c().required("Nombre obligatorio"),surname:y.c(),employerCode:y.c().required("Cod. Emp. obligatorio")}),an=function(e){var n=e.employees,t=Object(Je.b)();function a(e){t(function(e){return function(){var n=Object(N.a)(C.a.mark((function n(t){var a;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a="".concat(_).concat(M(e)),n.next=4,U.a.delete(a);case 4:$.b.success("Empleado eliminado!"),t(J()),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),$.b.error(n.t0.message);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(e))}return Object(oe.jsxs)(Ke,{className:"tabContainer",children:[Object(oe.jsx)(Xe,{children:"Gesti\xf3n de empleados"}),Object(oe.jsx)(k.b,{initialValues:nn,onSubmit:function(e){t(function(e){return function(){var n=Object(N.a)(C.a.mark((function n(t){var a,r;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a={role:1,name:"".concat(e.name," ").concat(e.surname),employerCode:e.employerCode},r="".concat(_).concat("/users"),n.next=5,U.a.post(r,a);case 5:$.b.success("Empleado creado!"),t(J()),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),$.b.error(n.t0.message);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(e))},validationSchema:tn,children:Object(oe.jsx)(k.a,{noValidate:!0,children:Object(oe.jsx)(Be,{})})}),Object(oe.jsx)(Ze,{children:n.length?n.map((function(e){return Object(oe.jsx)(en,{className:"employeesList",children:Object(oe.jsx)(Ye,{itemName:"(".concat(e.employerCode,"): ").concat(e.name," "),handleDelete:function(){a(e._id)}},e._id)})})):Object(oe.jsx)(ne.a,{color:"red",children:"Todav\xeda no se ha creado ning\xfan empleado."})})]})},rn=t(224),cn=t.n(rn),sn=Object(se.a)(ne.a)(ve||(ve=Object(x.a)(["\n  font-size: 1.15rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n"]))),on=se.a.div(ye||(ye=Object(x.a)(["\n  display: flex;\n  flex-direction: row;\n  margin-bottom: 1rem;\n  width: 100%;\n"]))),ln=se.a.div(ke||(ke=Object(x.a)(["\n  flex: 1;\n  .MuiButton-root {\n    min-width: unset;\n    border-radius: 50%;\n    width: 2.5rem;\n    height: 2.5rem;\n    margin-left: 1rem;\n    margin-top: 0.6rem;\n  }\n"]))),dn=function(){var e=Object(k.c)(),n=Object(Je.b)();function t(t){var a=t===H?"correctionalFactorMachine1":"correctionalFactorMachine2";e.setFieldTouched(a,!0);var r=Number(e.values[a]);r&&n(function(e,n){return function(){var t=Object(N.a)(C.a.mark((function t(a){var r,c,i;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e===H?"correctionalFactorMachine1":"correctionalFactorMachine2",c=Object(T.a)({},r,n),i="".concat(_).concat(E),t.next=6,U.a.patch(i,c);case 6:$.b.success("Actualizado!"),a(J()),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),$.b.error(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t,r))}return Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(sn,{children:"Editar factor corrector:"}),Object(oe.jsxs)(on,{children:[Object(oe.jsx)(Le,{type:"number",min:0,max:100,name:"correctionalFactorMachine1",label:"M\xe1quina 1",placeholder:"Nuevo factor corrector M1",adornment:"%",fullWidth:!0}),Object(oe.jsx)(ln,{children:Object(oe.jsx)(te.a,{className:"m1Button",variant:"contained",size:"small",disableElevation:!0,onClick:function(){t(H)},children:Object(oe.jsx)(cn.a,{fontSize:"small"})})})]}),Object(oe.jsxs)(on,{children:[Object(oe.jsx)(Le,{type:"number",min:0,max:100,name:"correctionalFactorMachine2",label:"M\xe1quina 2",placeholder:"Nuevo factor corrector M2",adornment:"%",fullWidth:!0}),Object(oe.jsx)(ln,{children:Object(oe.jsx)(te.a,{variant:"contained",size:"small",disableElevation:!0,onClick:function(){t(V)},children:Object(oe.jsx)(cn.a,{fontSize:"small"})})})]})]})},jn=Object(se.a)($e.a.div).attrs((function(){return{initial:{opacity:1},animate:{opacity:1}}}))(we||(we=Object(x.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  height: 100%;\n"]))),un=se.a.div(Ce||(Ce=Object(x.a)(["\n  margin: 0 1rem;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  max-width: 20rem;\n"]))),bn=se.a.div(Te||(Te=Object(x.a)(["\n  display: flex;\n  flex-direction: row;\n  margin-bottom: 1rem;\n"]))),mn=se.a.div(Ne||(Ne=Object(x.a)(["\n  .MuiButton-root {\n    min-width: unset;\n    border-radius: 50%;\n    width: 2.5rem;\n    height: 2.5rem;\n  }\n"]))),hn=Object(se.a)(ne.a)(_e||(_e=Object(x.a)(["\n  font-size: 1.15rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n"]))),On=se.a.ul(Ee||(Ee=Object(x.a)(["\n  list-style: none;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  overflow-y: auto;\n  height: 100%;\n"]))),xn=y.b({correctionalFactorMachine1:y.a().integer("No puede contener decimales").min(0,"El valor m\xednimo es 0").max(100,"El valor m\xe1ximo es 100"),correctionalFactorMachine2:y.a().integer("No puede contener decimales").min(0,"El valor m\xednimo es 0").max(100,"El valor m\xe1ximo es 100")}),pn=function(e){var n=e.settings,t=Object(Je.b)(),r=Object(a.useState)(""),c=Object(O.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)(""),l=Object(O.a)(o,2),d=l[0],j=l[1],u={correctionalFactorMachine1:n.correctionalFactorMachine1,correctionalFactorMachine2:n.correctionalFactorMachine2};function b(e){var n;window.confirm("Seguro que quieres eliminar el material?")&&t((n=e,function(){var e=Object(N.a)(C.a.mark((function e(t){var a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={$pull:{materials:n}},r="".concat(_).concat(E),e.next=5,U.a.patch(r,a);case 5:$.b.success("Material eliminado!"),t(J()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),$.b.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}()))}function m(e){window.confirm("Seguro que quieres eliminar el espesor?")&&t(function(e){return function(){var n=Object(N.a)(C.a.mark((function n(t){var a,r;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a={$pull:{thicknesses:e}},r="".concat(_).concat(E),n.next=5,U.a.patch(r,a);case 5:$.b.success("Espesor eliminado!"),t(J()),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),$.b.error(n.t0.message);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(e))}return Object(oe.jsxs)(jn,{className:"tabContainer",children:[Object(oe.jsx)(un,{className:"groupWrapper",children:Object(oe.jsx)(k.b,{initialValues:u,onSubmit:function(){},validationSchema:xn,children:Object(oe.jsx)(k.a,{noValidate:!0,children:Object(oe.jsx)(dn,{})})})}),Object(oe.jsxs)(un,{className:"groupWrapper",children:[Object(oe.jsx)(hn,{children:"Lista de materiales:"}),Object(oe.jsxs)(bn,{children:[Object(oe.jsx)(ce.a,{type:"text",name:"material",label:"Material",placeholder:"Nuevo material",size:"small",sx:{marginRight:"1rem"},value:i,onChange:function(e){var n=e.target;s(n.value)}}),Object(oe.jsx)(mn,{children:Object(oe.jsx)(te.a,{variant:"contained",size:"small",onClick:function(){var e;i?t((e=i,function(){var n=Object(N.a)(C.a.mark((function n(t){var a,r;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a={$push:{materials:e}},r="".concat(_).concat(E),n.next=5,U.a.patch(r,a);case 5:$.b.success("Material a\xf1adido!"),t(J()),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),$.b.error(n.t0.message);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}())):$.b.error("No hay un material introducido")},disableElevation:!0,children:Object(oe.jsx)(re.a,{fontSize:"small"})})})]}),Object(oe.jsx)(On,{className:"itemsList",children:n.materials.map((function(e){return Object(oe.jsx)(Ye,{itemName:e,handleDelete:function(){b(e)}},e)}))})]}),Object(oe.jsxs)(un,{className:"groupWrapper",children:[Object(oe.jsx)(hn,{children:"Lista de espesores"}),Object(oe.jsxs)(bn,{children:[Object(oe.jsx)(ce.a,{type:"text",name:"thickness",label:"Espesor (en cm)",placeholder:"Nuevo espesor",size:"small",sx:{marginRight:"1rem"},value:d,onChange:function(e){var n=e.target.value;n.includes(",")&&(n=n.replace(",",".")),j(n)}}),Object(oe.jsx)(mn,{children:Object(oe.jsx)(te.a,{variant:"contained",size:"small",onClick:function(){var e;d.match(/^[1-9]\d*(\.\d+)?$/)?t((e=Number(d),function(){var n=Object(N.a)(C.a.mark((function n(t){var a,r;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a={$push:{thicknesses:e}},r="".concat(_).concat(E),n.next=5,U.a.patch(r,a);case 5:$.b.success("Espesor a\xf1adido!"),t(J()),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),$.b.error(n.t0.message);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}())):$.b.error("Espesor invalido. Solo puede contener n\xfameros.")},disableElevation:!0,children:Object(oe.jsx)(re.a,{fontSize:"small"})})})]}),Object(oe.jsx)(On,{className:"itemsList",children:n.thicknesses.map((function(e){return Object(oe.jsx)(Ye,{itemName:"".concat(e," cm"),handleDelete:function(){m(e)}},e)}))})]})]})},fn="78vh",gn=se.a.div(Me||(Me=Object(x.a)(["\n  display: flex;\n  justify-content: start;\n  align-items: center;\n  max-width: ","px;\n  width: 100%;\n  margin: auto;\n  margin-bottom: 0.5rem;\n  background-color: #f5f5f5;\n  border-radius: 0.25rem;\n  padding: 0.5rem;\n  font-weight: 700;\n"])),1200),vn=se.a.div(Fe||(Fe=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  flex: 1;\n"]))),yn=se.a.div(De||(De=Object(x.a)(["\n  flex: 1;\n"]))),kn=function(e){var n=e.children,t=e.value,a=e.index;return Object(oe.jsx)("div",{role:"tabpanel",hidden:t!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a),style:{height:"calc(100% - 3rem)"},children:t===a&&Object(oe.jsxs)(p.a,{sx:{p:3,height:"100%",flex:1},children:[n,Object(oe.jsx)(yn,{})]})})},wn=se.a.div(Se||(Se=Object(x.a)(["\n  width: 100%;\n  display: flex;\n  color: white;\n  font-size: 1.75rem;\n  font-weight: 700;\n  justify-content: center;\n  margin-bottom: 1.5rem;\n"]))),Cn=function(e){var n=e.settings,t=Object(o.g)(),r=Object(a.useState)(0),c=Object(O.a)(r,2),i=c[0],s=c[1];function l(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var d=new URLSearchParams(window.location.search);Object(a.useEffect)((function(){var e=d.get("tab")||0;s(Number(e))}),[d]);return Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(wn,{children:"Zona de administraci\xf3n"}),Object(oe.jsxs)(p.a,{sx:{bgcolor:"background.paper",width:"100%",height:"calc(100% - 4rem)",flex:1,boxSizing:"border-box"},children:[Object(oe.jsx)(f.a,{position:"static",children:Object(oe.jsxs)(g.a,{value:i,onChange:function(e,n){t.push("/admin?tab=".concat(n))},"aria-label":"admin tabs",indicatorColor:"secondary",textColor:"inherit",children:[Object(oe.jsx)(v.a,Object(h.a)(Object(h.a)({label:"Ajustes generales"},l(0)),{},{sx:{color:"white"}})),Object(oe.jsx)(v.a,Object(h.a)(Object(h.a)({label:"Empleados"},l(1)),{},{sx:{color:"white"}}))]})}),Object(oe.jsx)(kn,{value:i,index:0,children:Object(oe.jsx)(pn,{settings:n})},"generalSettingsTab"),Object(oe.jsx)(kn,{value:i,index:1,children:Object(oe.jsx)(an,{employees:n.employees||[]})},"employeesTab")]})]})},Tn=t(726),Nn=se.a.div(Ie||(Ie=Object(x.a)(["\n  display: flex;\n  max-width: 35rem;\n  justify-content: center;\n  align-items: center;\n  margin: auto;\n  color: white;\n  margin-top: 3rem;\n"]))),_n=Object(se.a)(ne.a)(Pe||(Pe=Object(x.a)(["\n  margin-left: 1rem;\n  font-size: 1.5rem;\n"]))),En=function(e){var n=e.text;return Object(oe.jsxs)(Nn,{children:[Object(oe.jsx)(Tn.a,{}),Object(oe.jsx)(_n,{children:n||"Cargando..."})]})};var Mn,Fn=function(){var e=function(e){return Object(l.useQuery)(["loadAdminProfile",e],Object(N.a)(C.a.mark((function e(){var n,t,a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("".concat(_).concat(E));case 2:return n=e.sent,t=n.data,e.next=6,U.a.get("".concat(_).concat(F(1)));case 6:return a=e.sent,r=a.data,e.abrupt("return",Object(h.a)(Object(h.a)({},t),{},{employees:r}));case 9:case"end":return e.stop()}}),e)}))))}(Object(Je.c)((function(e){return e.mainReducer})).forceRender),n=e.isLoading,t=e.data;return Object(oe.jsx)(oe.Fragment,{children:n?Object(oe.jsx)(En,{}):t&&Object(oe.jsx)(Cn,{settings:t})})},Dn=function(){var e=Object(Je.b)(),n=Object(Je.c)((function(e){return e.mainReducer})),t=n.settings,r=n.forceRender;return Object(a.useEffect)((function(){t&&t.companyName||e(Z())}),[t]),Object(a.useEffect)((function(){e(Z())}),[r]),Object(oe.jsx)(oe.Fragment,{})},Sn=t(727),In=t(696),Pn=t(728),Ln=t(711),zn=t(729),qn=t(701),Rn=t(716),An=t(719),Wn=t(705),Bn=t(710),Gn=se.a.div(Mn||(Mn=Object(x.a)(["\n  margin-top: 0.5rem;\n  .MuiSelect-select {\n    padding: 0.75rem 0.5rem;\n  }\n"])));var Hn,Vn,Qn,Un=function(e){var n=e.name,t=e.label,a=e.values,r=e.variant,c=void 0===r?"outlined":r,i=e.size,s=void 0===i?"medium":i,o=e.margin,l=void 0===o?"dense":o,d=Object(k.c)();var j=a.map((function(e){return{label:(n=e,"string"===typeof n?n:"".concat(n," cm")),value:e};var n}));return Object(oe.jsx)(Gn,{children:Object(oe.jsxs)(Rn.a,{fullWidth:!0,children:[Object(oe.jsx)(Wn.a,{id:"demo-simple-select-label",children:t}),Object(oe.jsx)(qn.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:d.values[n],label:t,onChange:function(e){var t=e.target;d.setFieldValue(n,t.value)},error:!(!d.touched[n]||!d.errors[n]),variant:c,size:s,margin:l,defaultValue:d.values[n],children:j.map((function(e){return Object(oe.jsx)(Bn.a,{value:e.value,children:e.label},e.value)}))}),d.touched[n]&&d.errors[n]&&Object(oe.jsx)(An.a,{sx:{color:"#D32F2F"},children:d.errors[n]})]})})};function Yn(e){var n="";return e>0&&e<=2&&(n="rgba(93, 172, 245, 0.5)"),e>2&&e<=4&&(n="rgba(1, 187, 63, 0.5)"),e>4&&e<=8&&(n="rgba(255, 163, 15, 0.5)"),e>8&&e<=10&&(n="rgba(246, 91, 92, 0.5)"),n}var $n=se.a.div(Hn||(Hn=Object(x.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]))),Jn=se.a.div(Vn||(Vn=Object(x.a)(["\n  width: 1.75rem;\n  height: 1.75rem;\n  border-radius: 50%;\n  margin-right: 0.5rem;\n"]))),Kn=se.a.span(Qn||(Qn=Object(x.a)(["\n  font-size: 1rem;\n  font-weight: 600;\n"])));function Xn(e){var n="";return e>0&&e<=2&&(n="Normal"),e>2&&e<=4&&(n="Normal"),e>4&&e<=8&&(n="Urgencia 48h"),e>8&&e<=10&&(n="Urgencia 24h"),n}var Zn,et,nt=function(e){var n=e.priority;return Object(oe.jsxs)($n,{children:[Object(oe.jsx)(Jn,{style:{background:Yn(n)}}),Object(oe.jsx)(Kn,{children:Xn(n)})]})},tt=Object(se.a)(Sn.a)(Zn||(Zn=Object(x.a)(["\n  .MuiPaper-root {\n    max-width: 26rem;\n  }\n"]))),at=se.a.div(et||(et=Object(x.a)(["\n  display: flex;\n  justify-content: start;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n"]))),rt=["Maquina1","Maquina2"];var ct=function(e){var n=e.isOpen,t=e.handleClose,r=e.settings,c=Object(k.c)(),i=Object(Je.c)((function(e){return e.mainReducer.createTaskModal})).selectedMachine;return Object(a.useEffect)((function(){c.values.selectedMachine=i===H?"Maquina1":"Maquina2",c.values.correctionalFactor=i===H?r.correctionalFactorMachine1:r.correctionalFactorMachine2}),[i]),Object(a.useEffect)((function(){n||c.resetForm()}),[n]),Object(a.useEffect)((function(){c.values.correctionalFactor="Maquina1"===c.values.selectedMachine?r.correctionalFactorMachine1:r.correctionalFactorMachine2}),[c.values.selectedMachine,c.values.correctionalFactor]),Object(oe.jsx)(tt,{open:n,onClose:t,children:Object(oe.jsxs)(k.a,{noValidate:!0,children:[Object(oe.jsx)(In.a,{sx:{textAlign:"center"},children:"Nuevo programa"}),Object(oe.jsx)(Pn.a,{children:Object(oe.jsxs)(Ln.a,{container:!0,spacing:2,children:[Object(oe.jsx)(Ln.a,{item:!0,xs:12,children:Object(oe.jsx)(Le,{name:"employee",label:"C\xf3digo de empleado",autofocus:!0,fullWidth:!0})}),Object(oe.jsx)(Ln.a,{item:!0,xs:12,children:Object(oe.jsx)(Le,{name:"programNumber",label:"N\xba Programa",fullWidth:!0})}),Object(oe.jsx)(Ln.a,{item:!0,xs:6,children:Object(oe.jsx)(Un,{name:"material",label:"Material",values:r.materials})}),Object(oe.jsx)(Ln.a,{item:!0,xs:6,children:Object(oe.jsx)(Un,{name:"thickness",label:"Espesor",values:r.thicknesses})}),Object(oe.jsx)(Ln.a,{item:!0,xs:6,children:Object(oe.jsx)(Le,{name:"priority",label:"Prioridad",type:"number",min:1,max:10,fullWidth:!0})}),Object(oe.jsx)(Ln.a,{item:!0,xs:6,children:Object(oe.jsx)(at,{children:Object(oe.jsx)(nt,{priority:c.values.priority})})}),Object(oe.jsx)(Ln.a,{item:!0,xs:6,children:Object(oe.jsx)(Le,{name:"duration",label:"Tiempo",type:"number",adornment:"min",min:0,fullWidth:!0})}),Object(oe.jsx)(Ln.a,{item:!0,xs:6,children:Object(oe.jsx)(Le,{name:"correctionalFactor",label:"Factor corrector",fullWidth:!0,disabled:!0})}),Object(oe.jsx)(Ln.a,{item:!0,xs:12,children:Object(oe.jsx)(Un,{name:"selectedMachine",label:"M\xe1quina",values:rt})})]})}),Object(oe.jsxs)(zn.a,{children:[Object(oe.jsx)(te.a,{onClick:t,variant:"outlined",children:"Cancel"}),Object(oe.jsx)(te.a,{type:"submit",variant:"contained",children:"Submit"})]})]})})};var it,st,ot,lt=function(){var e=Object(Je.b)(),n=Object(Je.c)((function(e){return e.mainReducer.createTaskModal})),t=n.isOpen,a=n.selectedMachine,r=Object(Je.c)((function(e){return e.mainReducer})).settings,c={employee:"",material:"",thickness:"",programNumber:"",priority:1,duration:0,correctionalFactor:10,selectedMachine:a||"m\xe1quina1"},i=y.b({employee:y.c().required("El c\xf3digo de empleado es obligatorio."),material:y.c().required("El material es obligatorio."),programNumber:y.c().required("El n\xfamero de programa es obligatorio."),thickness:y.a().min(0,"No puede ser negativo.").required("El espesor es obligatorio."),priority:y.a().min(1,"El valor m\xednimo es 1.").max(10,"El valor m\xe1ximo es 10.").required("La prioridad es obligatoria."),duration:y.a().integer("No puede contener decimales.").required("La duraci\xf3n es obligatoria."),selectedMachine:y.c().required("La m\xe1quina es obligatoria.")});return Object(oe.jsx)(k.b,{initialValues:c,onSubmit:function(n){var t;e((t=n,function(){var e=Object(N.a)(C.a.mark((function e(n){var a,r,c,i,s,o,l,d,j,u,b;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="".concat(_).concat(D(t.employee)),e.next=4,U.a.get(a);case 4:if(r=e.sent,!(c=r.data)){e.next=25;break}return i="".concat(_).concat(P(t.selectedMachine.toLowerCase())),e.next=10,U.a.get(i);case 10:if(s=e.sent,!(o=s.data)){e.next=22;break}return l="".concat(_).concat("/tasks"),d=Y(c._id,o._id,t),e.next=17,U.a.post(l,d);case 17:$.b.success("Tarea creada!"),n(J()),n(K(!1)),e.next=23;break;case 22:$.b.error("La m\xe1quina seleccionada no existe");case 23:e.next=26;break;case 25:$.b.error("C\xf3digo de empleado inv\xe1lido");case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(0),b=(null===e.t0||void 0===e.t0||null===(j=e.t0.response)||void 0===j||null===(u=j.data)||void 0===u?void 0:u.message)||e.t0.message,$.b.error(b);case 32:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(n){return e.apply(this,arguments)}}()))},validationSchema:i,children:r&&Object(oe.jsx)(ct,{isOpen:t,handleClose:function(){e(K(!1))},settings:r})})},dt=t(733),jt=t(717),ut=t(734),bt=t(735),mt=t(731),ht=t(732),Ot=t(703),xt=se.a.div(it||(it=Object(x.a)(["\n  display: flex;\n  justify-content: center;\n  width: 100%;\n"]))),pt=se.a.div(st||(st=Object(x.a)(["\n  width: 100%;\n  max-width: ","px;\n\n  .MuiTableCell-head {\n    color: #002740;\n    font-weight: 700;\n    background-color: #f5f5f5;\n    border-bottom: 2px solid rgba(150, 150, 150, 1);\n    line-height: 1.25;\n    font-size: 1.1rem;\n  }\n\n  .MuiTableCell-body {\n    border-bottom: 1px solid rgba(255, 255, 255, 1);\n    font-weight: 500;\n    font-size: 1.1rem;\n  }\n\n  .MuiTablePagination-root {\n    color: white;\n  }\n\n  .MuiSvgIcon-root {\n    color: white;\n  }\n"])),1200),ft=se.a.div(ot||(ot=Object(x.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 1rem;\n\n  font-size: 1.75rem;\n\n  .MuiCircularProgress-root {\n    margin-right: 1rem;\n  }\n"]))),gt=t(730);function vt(e){var n=e.headCells;return Object(oe.jsx)(gt.a,{children:Object(oe.jsx)(mt.a,{children:n.map((function(e){return Object(oe.jsx)(ht.a,{align:"center",padding:"normal",children:e.label},e.id)}))})})}var yt,kt,wt=t(356),Ct=t.n(wt),Tt=t(355),Nt=t.n(Tt),_t=se.a.div(yt||(yt=Object(x.a)(["\n  display: flex;\n  justify-content: start;\n  align-items: center;\n  padding: 0.25rem 0.5rem;\n  border-radius: 0.5rem;\n  font-size: 0.9rem;\n  font-weight: 600;\n  width: fit-content;\n  margin: auto;\n"]))),Et=se.a.span(kt||(kt=Object(x.a)(["\n  line-height: normal;\n"]))),Mt={0:"En curso",1:"Finalizada"},Ft={0:"#014361",1:"#1e4620"},Dt={0:"#03a9f4",1:"#4caf50"},St={0:"#E5F5FD",1:"#EDF7ED"},It=function(e){var n=e.status;return Object(oe.jsxs)(_t,{className:"TaskStatusContainer",style:{background:St[n],color:Ft[n]},children:[0===n?Object(oe.jsx)(Nt.a,{style:{color:Dt[n],marginRight:"0.25rem"}}):Object(oe.jsx)(Ct.a,{style:{color:Dt[n],marginRight:"0.25rem"}}),Object(oe.jsx)(Et,{children:Mt[n]})]})},Pt=t(357),Lt=t.n(Pt);function zt(e){return e?Lt()(e).format("DD/MM/YY HH:mm"):"-"}function qt(e){var n="";return e>0&&e<=2&&(n="rgba(93, 172, 245, 0.5)"),e>2&&e<=4&&(n="rgba(1, 187, 63, 0.5)"),e>4&&e<=8&&(n="rgba(255, 163, 15, 0.5)"),e>8&&e<=10&&(n="rgba(246, 91, 92, 0.5)"),{backgroundColor:n}}function Rt(e){var n=e.tasks,t=e.headCells,a=e.isLoading,c=e.isError,i=r.a.useState(0),s=Object(O.a)(i,2),o=s[0],l=s[1],d=r.a.useState(25),j=Object(O.a)(d,2),u=j[0],b=j[1];return Object(oe.jsx)(xt,{className:"EnhancedTaskTable",children:Object(oe.jsx)(pt,{className:"EnhancedTaskTable__container",children:Object(oe.jsxs)(p.a,{sx:{width:"100%"},children:[Object(oe.jsx)(dt.a,{component:jt.a,sx:{maxHeight:"70vh"},children:Object(oe.jsxs)(ut.a,{sx:{minWidth:750,maxHeight:250},"aria-labelledby":"tableTitle",size:"medium",stickyHeader:!0,children:[Object(oe.jsx)(vt,{headCells:t}),Object(oe.jsx)(bt.a,{children:a?Object(oe.jsx)(mt.a,{children:Object(oe.jsx)(ht.a,{colSpan:999,children:Object(oe.jsxs)(ft,{children:[Object(oe.jsx)(Tn.a,{}),"Cargando Datos..."]})})}):c?Object(oe.jsx)(oe.Fragment,{}):n&&n.map((function(e,n){return Object(oe.jsxs)(mt.a,{sx:{"&:last-child td, &:last-child th":{border:0}},style:qt(e.priority),children:[Object(oe.jsx)(ht.a,{align:"center",children:Object(oe.jsx)(It,{status:e.status})}),Object(oe.jsx)(ht.a,{align:"center",children:e.material}),Object(oe.jsx)(ht.a,{align:"center",children:e.thickness}),Object(oe.jsx)(ht.a,{align:"center",children:e.programNumber}),Object(oe.jsx)(ht.a,{align:"center",children:e.machine.name}),Object(oe.jsxs)(ht.a,{align:"center",children:[e.duration," min"]}),Object(oe.jsx)(ht.a,{align:"center",children:zt(e.end||e.start)})]},e._id)}))})]})}),!a&&n&&Object(oe.jsx)(Ot.a,{rowsPerPageOptions:[25,50,75,100],component:"div",count:n.length,rowsPerPage:u,page:o,onPageChange:function(e,n){l(n)},onRowsPerPageChange:function(e){b(parseInt(e.target.value,10)),l(0)}})]})})})}t(521);var At,Wt,Bt,Gt,Ht,Vt=t(126),Qt=t.n(Vt),Ut=se.a.div(At||(At=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: #d8d8d8;\n  border-radius: 0.5rem;\n  padding: 0.15rem 0;\n\n  .MuiGrid-item {\n    text-align: center;\n    padding: 0.25rem;\n    font-weight: 400;\n  }\n"]))),Yt=se.a.div(Wt||(Wt=Object(x.a)(["\n  width: 95%;\n  height: 1px;\n  margin: auto;\n  background: #8a8a8a;\n"]))),$t=se.a.span(Bt||(Bt=Object(x.a)(["\n  font-weight: 700;\n"]))),Jt=se.a.span(Gt||(Gt=Object(x.a)(["\n  font-size: 1.5rem;\n"]))),Kt=se.a.span(Ht||(Ht=Object(x.a)(["\n  color: green;\n  font-weight: 700;\n"])));var Xt,Zt,ea=function(e){var n=e.machine1Tasks,t=e.machine1TimeToFinish,a=e.machine2Tasks,r=e.machine2TimeToFinish,c=e.totalTasks,i=e.totalTimeToFinish;return Object(oe.jsx)(Ut,{children:Object(oe.jsxs)(Ln.a,{container:!0,children:[Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"start",xs:3,children:Object(oe.jsx)($t,{children:"Maq.1"})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"start",xs:3,children:Object(oe.jsx)($t,{children:"Maq.2"})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsx)(Kt,{children:"Total"})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"start",xs:3,children:Object(oe.jsx)($t,{children:"Prog. Activos"})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsx)(Jt,{children:n})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsx)(Jt,{children:a})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsx)(Jt,{children:Object(oe.jsx)(Kt,{children:c})})}),Object(oe.jsx)(Yt,{}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsx)($t,{children:" T. Restante"})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsxs)(Jt,{children:[t," min"]})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsxs)(Jt,{children:[r," min"]})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsx)(Jt,{children:Object(oe.jsxs)(Kt,{children:[i," min "]})})})]})})};function na(e){return e?e.reduce((function(e,n){return e+n.duration}),0):0}var ta=se.a.div(Xt||(Xt=Object(x.a)(["\n  flex: 1;\n"]))),aa=se.a.div(Zt||(Zt=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n"])));var ra=function(e){var n=e.employee,t=e.tasks,a=function(e){var n=null===e||void 0===e?void 0:e.filter((function(e){return e.machine.name===H})),t=null===e||void 0===e?void 0:e.filter((function(e){return e.machine.name===V})),a=na(n),r=na(t);return{machine1:{activeTasks:null===n||void 0===n?void 0:n.length,timeToFinish:a},machine2:{activeTasks:null===t||void 0===t?void 0:t.length,timeToFinish:r}}}(t),r=Object(o.g)();return Object(oe.jsx)(gn,{className:"user-data-table-container",children:Object(oe.jsxs)(vn,{className:"user-data-table",children:[Object(oe.jsx)(Ge.a,{onClick:function(){return r.goBack()},"aria-label":"goBack",children:Object(oe.jsx)(Qt.a,{})}),Object(oe.jsxs)(aa,{children:[Object(oe.jsx)("span",{className:"user-data-table__info--name",children:null===n||void 0===n?void 0:n.name}),Object(oe.jsxs)("span",{className:"user-data-table__info",children:["C\xf3d. Emp: ",null===n||void 0===n?void 0:n.employerCode]})]}),Object(oe.jsx)(ta,{}),Object(oe.jsx)(ea,{machine1Tasks:a.machine1.activeTasks,machine1TimeToFinish:a.machine1.timeToFinish,machine2Tasks:a.machine2.activeTasks,machine2TimeToFinish:a.machine2.timeToFinish,totalTasks:null===t||void 0===t?void 0:t.length,totalTimeToFinish:na(t)})]})})};var ca,ia,sa,oa,la=function(e){var n=e.tasks,t=e.isLoading,a=e.isError,r=e.employee;return Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(ra,{employee:r,tasks:n}),Object(oe.jsx)(Rt,{headCells:[{id:"status",label:"Estado"},{id:"material",label:"Material"},{id:"thickness",label:"Espesor"},{id:"programNumber",label:"N\xba Programa"},{id:"machine",label:"M\xe1quina"},{id:"duration",label:"Tiempo"},{id:"date",label:"Fecha"}],tasks:n,isLoading:t,isError:a})]})},da=se.a.div(ca||(ca=Object(x.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: flex-start;\n"]))),ja=se.a.div(ia||(ia=Object(x.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding-top: 1.5rem;\n  font-size: 1.5rem;\n  color: white;\n\n  .MuiCircularProgress-root {\n    margin-right: 1rem;\n  }\n"]))),ua=se.a.div(sa||(sa=Object(x.a)(["\n  width: 49%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),ba=se.a.div(oa||(oa=Object(x.a)(["\n  padding: 1rem 0;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n\n  .flex-grow {\n    flex: 1;\n  }\n\n  .machines-home-page__machine-title {\n    font-size: 1.75rem;\n    color: white;\n  }\n\n  .machines__header-actions {\n    display: flex;\n    justify-content: flex-end;\n  }\n"]))),ma=t(21);var ha=function(){var e=function(e){return Object(l.useQuery)(["loadEmployeeTasks",e],Object(N.a)(C.a.mark((function n(){var t,a,r,c,i,s,o;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,U.a.get("".concat(_).concat(M(e)));case 2:return t=n.sent,a=t.data,n.next=6,U.a.get("".concat(_).concat("/tasks/user/".concat(e)));case 6:return r=n.sent,c=r.data,i=c.filter((function(e){return 0===e.status})).sort((function(e,n){return new Date(n.start)-new Date(e.start)})),s=c.filter((function(e){return 1===e.status})).sort((function(e,n){return new Date(n.end)-new Date(e.end)})),o=[].concat(Object(ma.a)(i),Object(ma.a)(s)),n.abrupt("return",{employeeTasks:o,employee:a});case 12:case"end":return n.stop()}}),n)}))),{refetchInterval:6e4})}(Object(o.h)().employeeId),n=e.isLoading,t=e.isError,a=e.data;return Object(oe.jsx)(oe.Fragment,{children:n?Object(oe.jsxs)(ja,{children:[Object(oe.jsx)(Tn.a,{}),"Cargando Datos..."]}):Object(oe.jsx)(la,{tasks:null===a||void 0===a?void 0:a.employeeTasks,employee:null===a||void 0===a?void 0:a.employee,isLoading:n,isError:t})})};t(522),t(523);var Oa=t(736),xa=t(737),pa=t(738);var fa,ga,va=function(e){var n=e.employee;return Object(oe.jsxs)(Oa.a,{className:"employee__card",children:[Object(oe.jsxs)(xa.a,{children:[Object(oe.jsxs)(ne.a,{color:"textSecondary",gutterBottom:!0,children:["C\xf3d. empleado: ",n.employerCode]}),Object(oe.jsx)(ne.a,{variant:"h5",component:"h2",children:n.name})]}),Object(oe.jsx)(pa.a,{children:Object(oe.jsx)(s.b,{to:"/employees/".concat(n._id),className:"employee__link",children:"Ver Empleado"})})]},n._id)},ya=se.a.div(fa||(fa=Object(x.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  width: 100%;\n"]))),ka=se.a.div(ga||(ga=Object(x.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 1rem;\n\n  font-size: 1.75rem;\n"])));var wa=function(e){var n=e.employees,t=e.isLoading,a=e.isError;return Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)("div",{className:"employees-title",children:"Lista de empleados"}),Object(oe.jsx)(ya,{className:"employees-container",children:t?Object(oe.jsxs)(ka,{children:[Object(oe.jsx)(Tn.a,{}),"Cargando Datos..."]}):a?Object(oe.jsx)(oe.Fragment,{}):n&&n.map((function(e){return Object(oe.jsx)(va,{employee:e},e._id)}))})]})};var Ca,Ta,Na,_a,Ea,Ma=function(){var e=Object(l.useQuery)(["loadEmployers"],Object(N.a)(C.a.mark((function e(){var n,t,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(_).concat(F(1)),e.next=3,U.a.get(n);case 3:return t=e.sent,a=t.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))),n=e.isLoading,t=e.isError,a=e.data;return Object(oe.jsx)(oe.Fragment,{children:Object(oe.jsx)(wa,{employees:a,isLoading:n,isError:t})})};function Fa(e){var n=e.tasks,t=e.headCells,a=e.isLoading,c=e.isError,i=r.a.useState(0),s=Object(O.a)(i,2),o=s[0],l=s[1],d=r.a.useState(25),j=Object(O.a)(d,2),u=j[0],b=j[1];return Object(oe.jsx)(xt,{className:"EnhancedTaskTable",children:Object(oe.jsx)(pt,{className:"EnhancedTaskTable__container",children:Object(oe.jsxs)(p.a,{sx:{width:"100%"},children:[Object(oe.jsx)(dt.a,{component:jt.a,sx:{maxHeight:fn},children:Object(oe.jsxs)(ut.a,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",children:[Object(oe.jsx)(vt,{headCells:t}),Object(oe.jsx)(bt.a,{children:a?Object(oe.jsx)(mt.a,{children:Object(oe.jsx)(ht.a,{colSpan:999,children:Object(oe.jsxs)(ft,{children:[Object(oe.jsx)(Tn.a,{}),"Cargando Datos..."]})})}):c?Object(oe.jsx)(oe.Fragment,{}):n&&n.map((function(e,n){return Object(oe.jsxs)(mt.a,{sx:{"&:last-child td, &:last-child th":{border:0}},style:qt(e.priority),children:[Object(oe.jsx)(ht.a,{align:"center",children:e.machine.name}),Object(oe.jsx)(ht.a,{align:"center",children:e.material}),Object(oe.jsx)(ht.a,{align:"center",children:e.thickness}),Object(oe.jsx)(ht.a,{align:"center",children:e.programNumber}),Object(oe.jsx)(ht.a,{align:"center",children:e.user.employerCode}),Object(oe.jsxs)(ht.a,{align:"center",children:[e.duration," min"]}),Object(oe.jsx)(ht.a,{align:"center",children:zt(e.end)})]},e._id)}))})]})}),!a&&n&&Object(oe.jsx)(Ot.a,{rowsPerPageOptions:[25,50,75,100],component:"div",count:n.length,rowsPerPage:u,page:o,onPageChange:function(e,n){l(n)},onRowsPerPageChange:function(e){b(parseInt(e.target.value,10)),l(0)}})]})})})}var Da=se.a.div(Ca||(Ca=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: #d8d8d8;\n  border-radius: 0.5rem;\n  padding: 0.15rem 0;\n\n  .MuiGrid-item {\n    text-align: center;\n    padding: 0.25rem;\n    font-weight: 400;\n  }\n"]))),Sa=se.a.div(Ta||(Ta=Object(x.a)(["\n  width: 95%;\n  height: 1px;\n  margin: auto;\n  background: #8a8a8a;\n"]))),Ia=se.a.span(Na||(Na=Object(x.a)(["\n  font-weight: 700;\n"]))),Pa=se.a.span(_a||(_a=Object(x.a)(["\n  font-size: 1.5rem;\n"]))),La=se.a.span(Ea||(Ea=Object(x.a)(["\n  color: green;\n  font-weight: 700;\n"])));var za,qa,Ra=function(e){var n=e.machine1Tasks,t=e.machine1Time,a=e.machine2Tasks,r=e.machine2Time,c=e.totalTasks,i=e.totalTime;return Object(oe.jsx)(Da,{children:Object(oe.jsxs)(Ln.a,{container:!0,children:[Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"start",xs:3,children:Object(oe.jsx)(Ia,{children:"Maq.1"})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"start",xs:3,children:Object(oe.jsx)(Ia,{children:"Maq.2"})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsx)(La,{children:"Total"})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"start",xs:3,children:Object(oe.jsx)(Ia,{children:"Prog. Terminados"})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsx)(Pa,{children:n})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsx)(Pa,{children:a})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsx)(Pa,{children:Object(oe.jsx)(La,{children:c})})}),Object(oe.jsx)(Sa,{}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsx)(Ia,{children:" Tiempo"})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsxs)(Pa,{children:[t," min"]})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsxs)(Pa,{children:[r," min"]})}),Object(oe.jsx)(Ln.a,{item:!0,alignItems:"center",xs:3,children:Object(oe.jsx)(Pa,{children:Object(oe.jsxs)(La,{children:[i," min "]})})})]})})};function Aa(e){var n=null===e||void 0===e?void 0:e.filter((function(e){return e.machine.name===H})),t=null===e||void 0===e?void 0:e.filter((function(e){return e.machine.name===V})),a=na(n),r=na(t);return{machine1:{tasks:null===n||void 0===n?void 0:n.length,time:a},machine2:{tasks:null===t||void 0===t?void 0:t.length,time:r}}}var Wa=se.a.div(za||(za=Object(x.a)(["\n  flex: 1;\n"]))),Ba=se.a.p(qa||(qa=Object(x.a)(["\n  margin-left: 0.5rem;\n  font-size: 1.5rem;\n  justify-self: flex-start;\n"])));var Ga,Ha=function(e){var n=e.tasks,t=Aa(n),a=Object(o.g)();return Object(oe.jsx)(gn,{className:"user-data-table-container",children:Object(oe.jsxs)(vn,{className:"user-data-table",children:[Object(oe.jsx)(Ge.a,{onClick:function(){return a.push(d)},"aria-label":"goBack",children:Object(oe.jsx)(Qt.a,{})}),Object(oe.jsx)(Ba,{children:"Programas finalizados"}),Object(oe.jsx)(Wa,{}),Object(oe.jsx)(Ra,{machine1Tasks:t.machine1.tasks,machine1Time:t.machine1.time,machine2Tasks:t.machine2.tasks,machine2Time:t.machine2.time,totalTasks:null===n||void 0===n?void 0:n.length,totalTime:na(n)})]})})},Va=(t(524),t(525),t(579),t(358)),Qa=t(22),Ua=t.n(Qa),Ya=Object(se.a)(te.a)(Ga||(Ga=Object(x.a)(["\n  && {\n    margin-left: 0.25rem;\n    margin-right: 0.25rem;\n  }\n"])));var $a,Ja=function(e){var n=e.dates,t=e.setDates,r=Object(a.useState)(null),c=Object(O.a)(r,2),i=c[0],s=c[1];function o(e){var n=Ua()().day(-e).hour(0).minute(59).second(59),a=Ua()().hour(23).minute(59).second(59);t({startDate:n,endDate:a})}return Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(Ya,{variant:"contained",color:"secondary",onClick:function(){return o(30)},children:"30 d\xedas"}),Object(oe.jsx)(Ya,{variant:"contained",color:"secondary",onClick:function(){return o(7)},children:"7 d\xedas"}),Object(oe.jsx)(Va.DateRangePicker,{startDate:n.startDate,startDateId:"your_unique_start_date_id",endDate:n.endDate,endDateId:"your_unique_end_date_id",onDatesChange:function(e){return function(e,a){e&&t(Object(h.a)(Object(h.a)({},n),{},{startDate:e.hour(0).minute(0).second(0)})),a&&t(Object(h.a)(Object(h.a)({},n),{},{endDate:a.hour(23).minute(59).second(59)}))}(e.startDate,e.endDate)},focusedInput:i,onFocusChange:function(e){return s(e)},displayFormat:"DD/MM/YYYY",firstDayOfWeek:1,isOutsideRange:function(){return!1}}),Object(oe.jsx)(Ya,{variant:"text",color:"secondary",onClick:function(){t({startDate:null,endDate:null})},children:"Reiniciar filtro"})]})},Ka=t(89),Xa=t(218),Za=t(226),er=t.n(Za),nr=Object(se.a)(te.a)($a||($a=Object(x.a)(["\n  font-weight: 700;\n"])));var tr,ar,rr=function(e){var n=e.filteredTasks,t=Aa(n),a=t.machine1.tasks,r=t.machine1.time,c=t.machine2.tasks,i=t.machine2.time,s=null===n||void 0===n?void 0:n.length,o=na(n);return Object(oe.jsx)(nr,{variant:"contained",onClick:function(){if(n){var e=new Xa.default,t=function(e){var n,t=[],a=Object(Ka.a)(e);try{for(a.s();!(n=a.n()).done;){var r,c=n.value,i=[];i.push(c.priority.toString()),i.push(c.machine.name),i.push(c.material),i.push(c.thickness.toString()),i.push(c.programNumber),i.push(c.user.employerCode),i.push(c.duration.toLocaleString()),i.push((null===(r=c.end)||void 0===r?void 0:r.toString())||""),t.push(i)}}catch(s){a.e(s)}finally{a.f()}return t}(n);if(0===t.length)return;var l="white";er()(e,{head:[["M\xe1quina","Programas Terminados","Tiempo"]],body:[["M\xe1quina 1","".concat(a),"".concat(r," min")],["M\xe1quina 2","".concat(c),"".concat(i," min")],["Total","".concat(s),"".concat(o," min")]],theme:"grid"}),er()(e,{head:[["Prioridad","M\xe1quina","Material","Espesor","N\xba Programa","T\xe9cnico","Tiempo","Fecha"]],body:t,theme:"plain",didParseCell:function(e){0===e.column.index&&(l=function(e){switch(e){case"1":case"2":return"#aed5fa";case"3":case"4":return"#80dd9f";case"5":case"6":case"7":case"8":return"#fdd187";case"9":case"10":return"#fbadad";default:return"white"}}(e.cell.raw)),e.cell.styles.fillColor=l}}),e.save("table.pdf")}},children:"Descargar PDF"})},cr=se.a.div(tr||(tr=Object(x.a)(["\n  flex: 1;\n"]))),ir=se.a.div(ar||(ar=Object(x.a)(["\n  margin-right: 5rem;\n"])));var sr=function(e){var n=e.filteredTasks,t=e.dates,a=e.setDates;return Object(oe.jsxs)(gn,{children:[Object(oe.jsx)(Ba,{children:"Filtro por fechas"}),Object(oe.jsx)(cr,{}),Object(oe.jsx)(Ja,{dates:t,setDates:a}),Object(oe.jsx)(ir,{}),Object(oe.jsx)(rr,{filteredTasks:n})]})};var or=function(e){var n=e.tasks,t=e.isLoading,r=e.isError,c=Object(a.useState)({startDate:null,endDate:null}),i=Object(O.a)(c,2),s=i[0],o=i[1],l=Object(a.useState)(n),d=Object(O.a)(l,2),j=d[0],u=d[1];return Object(a.useEffect)((function(){s.startDate&&s.endDate?function(e,t){var a=null===n||void 0===n?void 0:n.filter((function(n){var a=Ua()(n.end);if(a>=e&&a<=t)return!0}));u(a)}(s.startDate,s.endDate):u(n)}),[s,n]),Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(Ha,{tasks:j}),Object(oe.jsx)(sr,{filteredTasks:j,dates:s,setDates:o}),Object(oe.jsx)(Fa,{headCells:[{id:"machine",label:"M\xe1quina"},{id:"material",label:"Material"},{id:"thickness",label:"Espesor"},{id:"programNumber",label:"N\xba Programa"},{id:"employerCode",label:"T\xe9cnico"},{id:"duration",label:"Tiempo"},{id:"date",label:"Fecha"}],tasks:j,isLoading:t,isError:r})]})};var lr=function(){var e=Object(l.useQuery)(["loadFinishedTasks"],Object(N.a)(C.a.mark((function e(){var n,t,a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(_).concat(S(1)),e.next=3,U.a.get(n);case 3:return t=e.sent,a=t.data,r=a.sort((function(e,n){var t=new Date(e.end);return new Date(n.end)-t})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)}))),{refetchInterval:6e4}),n=e.isLoading,t=e.isError,a=e.data;return Object(oe.jsx)(oe.Fragment,{children:Object(oe.jsx)(or,{tasks:a,isLoading:n,isError:t})})},dr=(t(645),t(718)),jr=t(706),ur=t(698),br=t(699),mr=t(361),hr=t.n(mr),Or=t(712),xr=t(697),pr=t(363),fr=t.n(pr),gr=t(360),vr=t.n(gr),yr=t(227),kr=t.n(yr),wr=t(362),Cr=t.n(wr),Tr=t(359),Nr=t.n(Tr),_r=function(e){return"No existe un empleado con el c\xf3digo de empleado: ".concat(e,".")};function Er(e){return{type:R,payload:{errorMessage:e}}}var Mr=function(){var e=Object(o.g)(),n=Object(Je.b)(),t=Object(Je.c)((function(e){return e.authReducer})).user;return Object(oe.jsxs)("div",{className:"left-menu",children:[Object(oe.jsx)("div",{className:"left-menu__header",children:Object(oe.jsx)(Or.a,{children:(null===t||void 0===t?void 0:t.name.charAt(0))||"CRC"})}),Object(oe.jsxs)("nav",{className:"left-menu__nav",children:[Object(oe.jsxs)(dr.a,{children:[Object(oe.jsx)(jr.a,{disableGutters:!0,children:Object(oe.jsx)(s.c,{activeClassName:"left-menu__nav-item--active",to:d,className:"left-menu__nav-item",children:Object(oe.jsxs)(xr.a,{children:[Object(oe.jsx)(ur.a,{children:Object(oe.jsx)(Nr.a,{})}),Object(oe.jsx)(br.a,{primary:"Maquinas"})]})})}),Object(oe.jsxs)(dr.a,{component:"div",disablePadding:!0,children:[Object(oe.jsx)(s.c,{activeClassName:"left-menu__nav-item--active",to:j(H),className:"left-menu__nav-item",children:Object(oe.jsxs)(xr.a,{sx:{pl:5},children:[Object(oe.jsx)(ur.a,{children:Object(oe.jsx)(kr.a,{})}),Object(oe.jsx)(br.a,{primary:"Maquina 1"})]})}),Object(oe.jsx)(s.c,{activeClassName:"left-menu__nav-item--active",to:j(V),className:"left-menu__nav-item",children:Object(oe.jsxs)(xr.a,{sx:{pl:5},children:[Object(oe.jsx)(ur.a,{children:Object(oe.jsx)(kr.a,{})}),Object(oe.jsx)(br.a,{primary:"Maquina 2"})]})})]}),0===(null===t||void 0===t?void 0:t.role)&&Object(oe.jsx)(jr.a,{disableGutters:!0,children:Object(oe.jsx)(s.c,{activeClassName:"left-menu__nav-item--active",to:u,className:"left-menu__nav-item",children:Object(oe.jsxs)(xr.a,{children:[Object(oe.jsx)(ur.a,{children:Object(oe.jsx)(vr.a,{})}),Object(oe.jsx)(br.a,{primary:"Lista de t\xe9cnicos"})]})})}),Object(oe.jsx)(jr.a,{disableGutters:!0,children:Object(oe.jsx)(s.c,{activeClassName:"left-menu__nav-item--active",to:b,className:"left-menu__nav-item",children:Object(oe.jsxs)(xr.a,{children:[Object(oe.jsx)(ur.a,{children:Object(oe.jsx)(hr.a,{})}),Object(oe.jsx)(br.a,{primary:"Programas Terminados"})]})})}),0===(null===t||void 0===t?void 0:t.role)&&Object(oe.jsx)(jr.a,{disableGutters:!0,children:Object(oe.jsx)(s.c,{activeClassName:"left-menu__nav-item--active",to:m,className:"left-menu__nav-item",children:Object(oe.jsxs)(xr.a,{children:[Object(oe.jsx)(ur.a,{children:Object(oe.jsx)(Cr.a,{})}),Object(oe.jsx)(br.a,{primary:"Zona Admin"})]})})})]}),Object(oe.jsx)("div",{className:"flex-grow"}),Object(oe.jsx)(jr.a,{disableGutters:!0,className:"left-menu__nav-item left-menu__nav-item--bottom",children:Object(oe.jsxs)(xr.a,{onClick:function(){n((localStorage.removeItem("user"),{type:A})),e.replace("/")},children:[Object(oe.jsx)(ur.a,{children:Object(oe.jsx)(fr.a,{})}),Object(oe.jsx)(br.a,{primary:"Salir"})]})})]})]})};t(646);var Fr,Dr=function(e){var n=e.children;return Object(oe.jsxs)("div",{className:"layout",children:[Object(oe.jsx)("div",{className:"layout__menu-container",children:Object(oe.jsx)(Mr,{})}),Object(oe.jsx)("div",{className:"layout__content",children:n})]})},Sr=(t(647),t(364)),Ir=t.n(Sr),Pr=se.a.div(Fr||(Fr=Object(x.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100vw;\n  height: 100vh;\n\n  .MuiPaper-root {\n    padding: 3rem 1.25rem;\n    width: 17rem;\n  }\n\n  .MuiGrid-root {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n  .MuiAvatar-root {\n    margin-bottom: 1rem;\n    background-color: #1bbd7e;\n  }\n  .MuiFormControl-root {\n    margin-bottom: 1rem;\n    margin-top: 1rem;\n  }\n  .MuiButton-root {\n    margin-top: 1rem;\n  }\n"])));var Lr=function(){var e=Object(Je.b)(),n=Object(o.g)(),t=Object(Je.c)((function(e){return e.authReducer})),r=t.loginLoading,c=t.loginError,i=t.user,s=Object(a.useRef)(null),l=Object(a.useState)(""),d=Object(O.a)(l,2),j=d[0],u=d[1];function b(){var n;s.current&&e((n=s.current.value,function(){var e=Object(N.a)(C.a.mark((function e(t){var a,r,c,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:z}),a="".concat(_).concat("/auth/login"),r={employeeCode:n},e.next=6,U.a.post(a,r);case 6:c=e.sent,(i=c.data)?(localStorage.setItem("user",JSON.stringify(i)),t({type:q,payload:{user:i}})):t(Er(_r(n))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?(t(Er(e.t0.response.message)),$.b.error("C\xf3digo de empleado inv\xe1lido.")):(t(Er(e.t0.message)),$.b.error("Error al iniciar sesi\xf3n. Por favor, int\xe9ntelo de nuevo"));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n){return e.apply(this,arguments)}}()))}return Object(a.useEffect)((function(){i&&n.replace("/machines"),c&&u(c)}),[i,c]),Object(oe.jsx)(Pr,{children:Object(oe.jsx)(Ln.a,{children:Object(oe.jsxs)(jt.a,{elevation:10,children:[Object(oe.jsxs)(Ln.a,{children:[Object(oe.jsx)(Or.a,{children:Object(oe.jsx)(Ir.a,{})}),Object(oe.jsx)("h2",{children:"Login"})]}),Object(oe.jsx)(ce.a,{label:"C\xf3digo de empleado",placeholder:"Entra el c\xf3digo de empleado",variant:"standard",fullWidth:!0,required:!0,inputRef:s,onKeyUp:function(e){"Enter"===e.key&&b()}}),r&&Object(oe.jsx)(Tn.a,{}),Object(oe.jsx)("small",{className:"form__warningMessage",children:j}),Object(oe.jsx)(te.a,{variant:"contained",fullWidth:!0,onClick:b,children:"login"})]})})})};var zr,qr=function(e){var n=e.taskId,t=e.openFinishedTaskDialog;return Object(oe.jsx)(oe.Fragment,{children:Object(oe.jsx)(te.a,{variant:"contained",disableElevation:!0,onClick:function(){t(n)},children:"Finalizar"})})},Rr=t(739),Ar={taskId:"",isAcceptButtonActive:!1,employeeCode:""};function Wr(){var e=Object(Je.b)(),n=Object(a.useState)(!1),t=Object(O.a)(n,2),r=t[0],c=t[1],i=Object(a.useState)(Ar),s=Object(O.a)(i,2),o=s[0],l=s[1];function d(){c(!1)}var j=Object(oe.jsxs)(Sn.a,{open:r,onClose:d,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(oe.jsx)(In.a,{id:"alert-dialog-title",children:"Confirmaci\xf3n finalizar programa"}),Object(oe.jsxs)(Pn.a,{children:[Object(oe.jsx)(Rr.a,{id:"alert-dialog-description",children:"\xa0Introduce tu c\xf3digo de empleado para finalizar el programa:"}),Object(oe.jsx)(Ln.a,{container:!0,children:Object(oe.jsx)(Ln.a,{item:!0,xs:8,children:Object(oe.jsx)(ce.a,{variant:"outlined",label:"C\xf3d. Empleado",placeholder:"C\xf3digo de empleado",fullWidth:!0,sx:{marginTop:"1rem"},value:o.employeeCode,onChange:function(e){var n=e.target,t=!1;n.value&&(t=!0),l((function(e){return Object(h.a)(Object(h.a)({},e),{},{isAcceptButtonActive:t,employeeCode:n.value})}))}})})})]}),Object(oe.jsxs)(zn.a,{children:[Object(oe.jsx)(te.a,{onClick:d,children:"Cancelar"}),Object(oe.jsx)(te.a,{onClick:function(){var n,t;e((n=o.employeeCode,t=o.taskId,function(){var e=Object(N.a)(C.a.mark((function e(a){var r,c,i,s,o,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="".concat(_).concat(D(n)),e.next=4,U.a.get(r);case 4:if(!e.sent){e.next=14;break}return c="".concat(_).concat(I(t)),i={status:1,end:new Date},e.next=10,U.a.patch(c,i);case 10:$.b.success("Tarea finalizada!"),a(J()),e.next=15;break;case 14:$.b.error("C\xf3digo de empleado inv\xe1lido");case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),l=(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message)||e.t0.message,$.b.error(l);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(n){return e.apply(this,arguments)}}())),c(!1)},autoFocus:!0,variant:"contained",disabled:!o.isAcceptButtonActive,children:"Finalizar programa"})]})]});return{FinishTaskDialog:j,handleFinishTaskDialogOpen:function(e){c(!0),l(Object(h.a)(Object(h.a)({},o),{},{taskId:e,isAcceptButtonActive:!1,employeeCode:""}))},handleFinishTaskDialogClose:d}}var Br,Gr,Hr=Object(se.a)(Ge.a)(zr||(zr=Object(x.a)(["\n  .MuiSvgIcon-root {\n    color: #707070;\n\n    &:hover {\n      color: #1876d1;\n    }\n  }\n"])));function Vr(e){var n=e.tasks,t=e.headCells,r=e.isLoading,c=e.isError,i=e.handleDeleteTask,s=Object(Je.c)((function(e){return e.authReducer})).user,o=Wr(),l=o.FinishTaskDialog,d=o.handleFinishTaskDialogOpen,j=Object(a.useState)(0),u=Object(O.a)(j,2),b=u[0],m=u[1],h=Object(a.useState)(25),x=Object(O.a)(h,2),f=x[0],g=x[1];return Object(oe.jsxs)(xt,{className:"EnhancedTaskTable",children:[Object(oe.jsx)(pt,{className:"EnhancedTaskTable__container",children:Object(oe.jsxs)(p.a,{sx:{width:"100%"},children:[Object(oe.jsx)(dt.a,{component:jt.a,sx:{maxHeight:fn},children:Object(oe.jsxs)(ut.a,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",stickyHeader:!0,children:[Object(oe.jsx)(vt,{headCells:t}),Object(oe.jsx)(bt.a,{children:r?Object(oe.jsx)(mt.a,{children:Object(oe.jsx)(ht.a,{colSpan:999,children:Object(oe.jsxs)(ft,{children:[Object(oe.jsx)(Tn.a,{}),"Cargando Datos..."]})})}):c?Object(oe.jsx)(oe.Fragment,{}):n&&n.map((function(e,n){return Object(oe.jsxs)(mt.a,{sx:{"&:last-child td, &:last-child th":{border:0}},style:qt(e.priority),children:[Object(oe.jsx)(ht.a,{align:"center",children:e.material}),Object(oe.jsx)(ht.a,{align:"center",children:e.thickness}),Object(oe.jsx)(ht.a,{align:"center",children:e.programNumber}),Object(oe.jsx)(ht.a,{align:"center",children:e.user.employerCode}),Object(oe.jsxs)(ht.a,{align:"center",children:[e.duration," min"]}),Object(oe.jsxs)(ht.a,{align:"right",children:[(0===(null===s||void 0===s?void 0:s.role)||e.user.employerCode===(null===s||void 0===s?void 0:s.employerCode))&&Object(oe.jsx)(qr,{taskId:e._id,programNumber:e.programNumber,openFinishedTaskDialog:d}),0===(null===s||void 0===s?void 0:s.role)&&Object(oe.jsx)(Hr,{color:"secondary",onClick:function(){i(e._id)},sx:{marginLeft:"0.5rem"},children:Object(oe.jsx)(Ve.a,{color:"primary"})})]})]},e._id)}))})]})}),!r&&n&&Object(oe.jsx)(Ot.a,{rowsPerPageOptions:[25,50,75,100],component:"div",count:n.length,rowsPerPage:f,page:b,onPageChange:function(e,n){m(n)},onRowsPerPageChange:function(e){g(parseInt(e.target.value,10)),m(0)}})]})}),l]})}var Qr=se.a.p(Br||(Br=Object(x.a)(["\n  margin: 0 0.5rem;\n  font-size: 1.25rem;\n  width: 6.25rem;\n"]))),Ur=se.a.p(Gr||(Gr=Object(x.a)(["\n  width: 22rem;\n  margin-left: 1.5rem;\n  text-align: center;\n  font-size: 1.75rem;\n"])));var Yr=function(e){var n=e.machineName,t=e.activeOrders,a=e.timeToFinish,r=Object(o.g)(),c=Object(Je.b)();return Object(oe.jsxs)(gn,{className:"user-data-table-container",children:[Object(oe.jsx)(Ge.a,{onClick:function(){return r.push(d)},"aria-label":"goBack",children:Object(oe.jsx)(Qt.a,{})}),Object(oe.jsxs)(vn,{children:[Object(oe.jsx)(Qr,{className:"user-data-table__info--name",children:"maquina1"===n?"M\xe1quina 1":"M\xe1quina 2"}),Object(oe.jsxs)(Ur,{className:"user-data-table__info",children:["Programas activos: ",t]}),Object(oe.jsxs)(Ur,{className:"user-data-table__info",children:["Tiempo restante: ",a," min"]})]}),Object(oe.jsx)(yn,{}),Object(oe.jsx)(te.a,{variant:"contained",color:"secondary",onClick:function(){c(X(n)),c(K(!0))},children:"Nuevo programa"})]})};function $r(e){return e?e.sort((function(e,n){return n.priority-e.priority})):void 0}var Jr=function(e){var n=e.tasks,t=e.isLoading,a=e.isError,r=e.machineName,c=e.handleDeleteTask;return Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(Yr,{machineName:r,activeOrders:(null===n||void 0===n?void 0:n.length)||0,timeToFinish:na(n)}),Object(oe.jsx)(Vr,{headCells:[{id:"material",label:"Material"},{id:"thickness",label:"Espesor"},{id:"programNumber",label:"N\xba Programa"},{id:"employerCode",label:"T\xe9cnico"},{id:"duration",label:"Tiempo"},{id:"actions",label:"Acciones"}],tasks:$r(n),isLoading:t,isError:a,handleDeleteTask:c})]})};var Kr=function(){var e=Object(Je.b)(),n=Object(Je.c)((function(e){return e.mainReducer})).forceRender,t=Object(o.h)().machineName,a=function(e,n){return Object(l.useQuery)(["loadMachineTasks",e,n],Object(N.a)(C.a.mark((function n(){var t,a,r,c,i,s;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="".concat(_).concat(P(e)),n.next=3,U.a.get(t);case 3:return a=n.sent,r=a.data,c="".concat(_).concat((o=r._id,"/tasks/active/machine/".concat(o))),n.next=8,U.a.get(c);case 8:return i=n.sent,s=i.data,n.abrupt("return",s);case 11:case"end":return n.stop()}var o}),n)}))),{refetchInterval:6e4})}(t,n),r=a.isLoading,c=a.isError,i=a.data;return Object(oe.jsx)(oe.Fragment,{children:Object(oe.jsx)(Jr,{machineName:t,tasks:i,handleTaskClick:function(e){},handleDeleteTask:function(n){window.confirm("Seguro que deseas eliminar la tarea?")&&e(function(e){return function(){var n=Object(N.a)(C.a.mark((function n(t){var a,r,c,i;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a="".concat(_).concat(I(e)),n.next=4,U.a.delete(a);case 4:$.b.success("Tarea eliminada!"),t(J()),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),i=(null===n.t0||void 0===n.t0||null===(r=n.t0.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message)||n.t0.message,$.b.error(i);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(n))},isLoading:r,isError:c})})};function Xr(e){var n=Object(Je.c)((function(e){return e.authReducer})).user,t=e.tasks,r=e.headCells,c=Wr(),i=c.FinishTaskDialog,s=c.handleFinishTaskDialogOpen,o=Object(a.useState)(0),l=Object(O.a)(o,2),d=l[0],j=l[1],u=Object(a.useState)(25),b=Object(O.a)(u,2),m=b[0],h=b[1];return Object(oe.jsxs)(xt,{className:"EnhancedTaskTable",children:[Object(oe.jsx)(pt,{className:"EnhancedTaskTable__container",children:Object(oe.jsxs)(p.a,{sx:{width:"100%"},children:[Object(oe.jsx)(dt.a,{component:jt.a,sx:{maxHeight:fn},children:Object(oe.jsxs)(ut.a,{"aria-labelledby":"tableTitle",size:"medium",stickyHeader:!0,children:[Object(oe.jsx)(vt,{headCells:r}),Object(oe.jsx)(bt.a,{children:t&&t.map((function(e,t){return Object(oe.jsxs)(mt.a,{sx:{"&:last-child td, &:last-child th":{border:0}},style:qt(e.priority),children:[Object(oe.jsx)(ht.a,{align:"center",children:e.programNumber}),Object(oe.jsxs)(ht.a,{align:"center",children:[e.duration," min"]}),Object(oe.jsx)(ht.a,{align:"center",children:(0===(null===n||void 0===n?void 0:n.role)||e.user.employerCode===(null===n||void 0===n?void 0:n.employerCode))&&Object(oe.jsx)(qr,{taskId:e._id,programNumber:e.programNumber,openFinishedTaskDialog:s})})]},e._id)}))})]})}),t&&Object(oe.jsx)(Ot.a,{rowsPerPageOptions:[25,50,75,100],component:"div",count:t.length,rowsPerPage:m,page:d,onPageChange:function(e,n){j(n)},onRowsPerPageChange:function(e){h(parseInt(e.target.value,10)),j(0)}})]})}),i]})}var Zr=function(e){var n=e.tasks,t=e.isLoading,a=Object(Je.b)(),r=[{id:"programNumber",label:"N\xba Programa"},{id:"duration",label:"Tiempo"},{id:"actions",label:"Acciones"}];function c(e){a(X(e)),a(K(!0))}return Object(oe.jsxs)(oe.Fragment,{children:[t&&Object(oe.jsxs)(ja,{children:[Object(oe.jsx)(Tn.a,{}),"Cargando Datos..."]}),n&&Object(oe.jsxs)(da,{children:[Object(oe.jsxs)(ua,{children:[Object(oe.jsxs)(ba,{children:[Object(oe.jsx)("div",{className:"flex-grow"}),Object(oe.jsx)("h3",{className:"machines-home-page__machine-title",children:"M\xe1quina 1"}),Object(oe.jsx)("div",{className:"flex-grow machines__header-actions",children:Object(oe.jsx)(te.a,{variant:"contained",color:"secondary",onClick:function(){c(H)},children:"Nuevo programa"})})]}),Object(oe.jsx)(Xr,{tasks:$r(n.machine1),headCells:r})]}),Object(oe.jsxs)(ua,{children:[Object(oe.jsxs)(ba,{children:[Object(oe.jsx)("div",{className:"flex-grow"}),Object(oe.jsx)("h3",{className:"machines-home-page__machine-title",children:"M\xe1quina 2"}),Object(oe.jsx)("div",{className:"flex-grow machines__header-actions",children:Object(oe.jsx)(te.a,{variant:"contained",color:"secondary",onClick:function(){c(V)},children:"Nuevo programa"})})]}),Object(oe.jsx)(Xr,{tasks:$r(n.machine2),headCells:r})]})]})]})};var ec=function(){var e=function(e){return Object(l.useQuery)(["loadMachinesHomeTasks",e],Object(N.a)(C.a.mark((function e(){var n,t,a,r,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(_).concat(S(0)),e.next=3,U.a.get(n);case 3:return t=e.sent,a=t.data,r=a.filter((function(e){return e.machine.name===H})),c=a.filter((function(e){return e.machine.name===V})),e.abrupt("return",{machine1:r,machine2:c});case 8:case"end":return e.stop()}}),e)}))),{refetchInterval:6e4})}(Object(Je.c)((function(e){return e.mainReducer})).forceRender),n=e.isLoading,t=e.isError,a=e.data;return Object(oe.jsx)(oe.Fragment,{children:Object(oe.jsx)(Zr,{tasks:a,handleTaskClick:function(e){},isLoading:n,isError:t})})},nc=t(186),tc=["path","component","exact"];var ac=function(e){var n=e.path,t=e.component,a=e.exact,r=Object(nc.a)(e,tc),c=Object(Je.c)((function(e){return e.authReducer.user}));return Object(oe.jsx)(o.b,Object(h.a)(Object(h.a)({path:n,exact:a},r),{},{render:function(e){return c?Object(oe.jsx)(t,Object(h.a)({},e)):Object(oe.jsx)(o.a,{to:"/"})}}))},rc=["path","component","exact"];var cc=function(e){var n=e.path,t=e.component,a=e.exact,r=Object(nc.a)(e,rc),c=Object(Je.c)((function(e){return e.authReducer.user}));return Object(oe.jsx)(o.b,Object(h.a)(Object(h.a)({path:n,exact:a},r),{},{render:function(e){return c?0===c.role?Object(oe.jsx)(t,Object(h.a)({},e)):Object(oe.jsx)(o.a,{to:d}):Object(oe.jsx)(o.a,{to:"/"})}}))},ic=t(129),sc=t(365);var oc=Object(ic.b)({authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,t={};switch(n.type){case z:t=Object(h.a)(Object(h.a)({},e),{},{loginLoading:!0});break;case R:t=Object(h.a)(Object(h.a)({},e),{},{loginLoading:!1,loginError:n.payload.errorMessage});break;case q:t=Object(h.a)(Object(h.a)({},e),{},{loginLoading:!1,loginError:null,user:n.payload.user});break;case A:t=Object(h.a)(Object(h.a)({},e),{},{user:null});break;default:t=e}return t},mainReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,t={};switch(n.type){case L:t=Object(h.a)(Object(h.a)({},e),{},{forceRender:++e.forceRender});break;case W:t=Object(h.a)(Object(h.a)({},e),{},{createTaskModal:Object(h.a)(Object(h.a)({},e.createTaskModal),{},{isOpen:n.payload})});break;case B:t=Object(h.a)(Object(h.a)({},e),{},{createTaskModal:Object(h.a)(Object(h.a)({},e.createTaskModal),{},{selectedMachine:n.payload})});break;case G:t=Object(h.a)(Object(h.a)({},e),{},{settings:n.payload});break;default:t=e}return t}});function lc(e){var n=window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ic.c;return Object(ic.d)(oc,e,n(Object(ic.a)(sc.a)))}var dc={mainReducer:{forceRender:0,createTaskModal:{isOpen:!1,selectedMachine:"m\xe1quina1"},settings:null},authReducer:{user:JSON.parse(localStorage.getItem("user"))||null}},jc=new l.QueryClient;var uc=function(){return Object(oe.jsx)(oe.Fragment,{children:Object(oe.jsxs)(Je.a,{store:lc(dc),children:[Object(oe.jsxs)(l.QueryClientProvider,{client:jc,children:[Object(oe.jsx)(Dn,{}),Object(oe.jsx)(s.a,{basename:"/corobcat",children:Object(oe.jsxs)(o.d,{children:[Object(oe.jsx)(o.b,{path:"/",exact:!0,children:Object(oe.jsx)(Lr,{})}),Object(oe.jsxs)(Dr,{children:[Object(oe.jsx)(ac,{path:u,exact:!0,component:Ma}),Object(oe.jsx)(ac,{path:"/employees/:employeeId",component:ha}),Object(oe.jsx)(ac,{path:b,component:lr}),Object(oe.jsx)(ac,{path:d,exact:!0,component:ec}),Object(oe.jsx)(ac,{path:"/machines/:machineName",component:Kr}),Object(oe.jsx)(cc,{path:m,component:Fn})]})]})}),Object(oe.jsx)(lt,{})]}),Object(oe.jsx)($.a,{toastOptions:{duration:3e3}})]})})},bc=function(e){e&&e instanceof Function&&t.e(6).then(t.bind(null,882)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,c=n.getLCP,i=n.getTTFB;t(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(oe.jsx)(r.a.StrictMode,{children:Object(oe.jsx)(uc,{})}),document.getElementById("root")),bc()}},[[648,1,2]]]);
//# sourceMappingURL=main.23325631.chunk.js.map